<!--
 - Created by Jiae.Tak on 2025-05-29.
 -->

<template>
    <div class="container slds-p-around_medium">
        <div class="suggest_info">
            <span class="title">ğŸ’¡ Agentron ìê°€ ì ê²€ ê¸°ë°˜ í–‰ë™ ì¶”ì²œ</span>
            <p class="instruction-text">
                ê°€ì¥ ì í•©í•œ 1ê°œ ì´ìƒì˜ í–‰ë™ì„ ì„ íƒí•´ì£¼ì„¸ìš”. ì„ íƒ ì™„ë£Œ í›„ Agentron ì—ê²Œ ì•Œë ¤ì£¼ì„¸ìš”!
            </p>
            <template if:true={checkedCount}>
                <div class="info-bottom-row">
                    <div class="item-checked">
                        âœ… {checkedCount}ê°œ í•­ëª©ì´ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤.
                    </div>
<!--                    <button class="submit-btn" onclick={handleSubmit}>ì œì¶œí•˜ê¸°</button>-->
                    <template lwc:if={showDownloadButton}>
                        <button class="submit-btn"
                                onclick={handleDownloadManual}>ë§¤ë‰´ì–¼ ë‹¤ìš´</button>
                    </template>
                </div>
            </template>
        </div>

        <template if:true={errorMessage}>
            <div class="slds-notify slds-notify_alert slds-theme_error" role="alert">
                <span class="slds-assistive-text">Error:</span>
                <h2>{errorMessage}</h2>
            </div>
        </template>

        <template if:false={isLoading}>
            <template if:true={analysisSummary}>
                <div class="analysis-summary-section">
                    <h3>ğŸ“Š ë¶„ì„ ìš”ì•½</h3>
                    <p>{analysisSummary}</p>
                </div>
                <hr>
            </template>

            <template for:each={recommendItem} for:item="item">
                <div key={item.actionIndex} class={item.cssClass} data-id={item.actionIndex} onclick={handleItemClick}>
                    <div class="top-section">
                        <div class="number">{item.actionIndex}</div>
                        <div class="detail">
                            <ul>
                                <li>ê³ ì¥ìœ í˜• : {item.type}</li>
                                <li>ê³ ì¥ì„¸ë¶€ìœ í˜• : {item.subType}</li>
                                <li>ê³ ì¥ì›ì¸ : {item.reason}</li>
                                <li>ê²°í•¨ìœ„ì¹˜ : {item.location}</li>
                                <template if:true={item.formattedPartsNeeded}>
                                    <li>
                                        í•„ìš”ë¶€í’ˆ(ìˆ˜ëŸ‰) : <strong>{item.formattedPartsNeeded}</strong>
                                    </li>
                                </template>
                            </ul>
                        </div>
                    </div>
                    <div class="action">
                        ğŸ”§ <strong>ì¶”ì²œ í–‰ë™:</strong> {item.action}
                    </div>
                </div>
            </template>
        </template>
    </div>
</template>